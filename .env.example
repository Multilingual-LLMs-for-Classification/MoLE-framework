# MOE Classification Service Environment Configuration
# Copy this file to .env and customize values

# =============================================================================
# API Configuration
# =============================================================================
API_HOST=0.0.0.0
API_PORT=8000
DEBUG=false

# =============================================================================
# JWT Authentication
# =============================================================================
# IMPORTANT: Change this in production!
JWT_SECRET_KEY=your-super-secret-key-change-in-production
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30

# =============================================================================
# GPU Configuration
# =============================================================================
CUDA_VISIBLE_DEVICES=0

# =============================================================================
# Request Settings
# =============================================================================
REQUEST_TIMEOUT_SECONDS=120
MAX_CONCURRENT_GPU_REQUESTS=1

# =============================================================================
# Distributed Architecture Settings
# =============================================================================
# Service mode:
#   coordinator  — gating pipeline only + HTTP gateway to expert workers (default)
#   monolithic   — full pipeline incl. LLM in-process (original single-GPU mode)
SERVICE_MODE=coordinator

# Path to the expert machine mapping config (coordinator mode only)
EXPERT_MAPPING_PATH=/app/config/expert_machine_mapping.json

# =============================================================================
# Expert Worker Settings
# (set these when running expert_worker/main.py directly or via docker-compose-worker.yml)
# =============================================================================
# WORKER_MODEL_KEY=llama-2-7b-hf
# WORKER_ID=worker-0
# WORKER_PORT=8001
# EXPERT_REGISTRY_PATH=/app/moe_router/experts/config/experts_registry.json

# =============================================================================
# Pre-configured Users (optional)
# Format: "username:bcrypt_hash,username2:bcrypt_hash2"
# Generate hash with: python -c "from passlib.context import CryptContext; print(CryptContext(schemes=['bcrypt']).hash('password'))"
# =============================================================================
USERS_STORE=
